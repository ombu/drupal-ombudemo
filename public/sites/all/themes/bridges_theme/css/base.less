// Base styles for all screens.
// -----------------------------------------------------------------------------

.debug-media-response-message('Media response: Base');

// Globals
// -----------------------------------------------------------------------------

html {
  // Subsequent font sizes expressed in rem units will be calculated
  // relative to the font-size of the html element.
  font-size: @font-size-root;
}

body {
  padding-top: @height-header;
  font-family: @font-family-sans-serif;
  font-weight: @font-weight-regular;
  .font-size(@font-size-base, @line-height-base);
  background-color: @color-polo;
  color: @color-black;
}

a {
  text-decoration: none;
  transition: all @transition-duration-fast ease;
}

// Extend stems
// -----------------------------------------------------------------------------

.decorative-header {
  margin-top: 0.5em;
  margin-bottom: 1.0em;
  padding-bottom: 0.4em;
  border-bottom: 2px solid @color-botticelli;
  .font-size(24, 1.2);
  font-family: @font-family-decorative;
  font-weight: normal;
  color: @color-matisse;
}

.capital-header {
  .font-size(18, 1.3);
  font-weight: @font-weight-black;
  text-transform: uppercase;
}

// Grid
// -----------------------------------------------------------------------------

.set-grid-metrics(@gutter-side-mobile);

// Region: header
// ----------------------------------------------------------------------------

[data-type="region"][data-name="header-background"],
[data-type="region"][data-name="header"] {
  position: fixed;
  z-index: @z-index-contextual + 1;
  top: 0;
  left: 0;
  width: 100%;
  height: @height-header;
  transition: all @transition-duration-default ease;

  html.menu-open & {
    height: 180px;
    transition: all (@transition-duration-leisurely * 0.8) ease;
  }
}

[data-type="region"][data-name="header-background"] {
  background-color: fade(@color-prussian, 100%);
  mix-blend-mode: multiply;
  top: 0;

  &:after {
    content: '';
    display: block;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    height: 0;
    margin-top: -2px;
    padding-top: 0%;
    // /sites/all/themes/bridges_theme/images/arches/prussian.svg
    background: transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiMwMDIwNGYiIGQ9Ik0zMjAsMjB2LTAuMDA0QzI4My41MTEsNy44NTQsMjI1LjQyNSwwLDE2MCwwUzM2LjQ4OSw3Ljg1NCwwLDE5Ljk5NlYyMEgzMjB6Ii8+PC9zdmc+) center top no-repeat;
    background-size: cover;
    transform-origin: center center;
    transform: rotate(180deg);
    transition: all @transition-duration-leisurely ease;
  }

  html.menu-open & {
    &:after {
      padding-top: @ar-arch * 1.1;
    }
  }
}

[data-type="region"][data-name="header"] {
  font-family: @font-family-sans-serif-condensed;
  .font-size(23, 1.5);
  color: @color-bayoux;
  text-transform: uppercase;
  background-color: transparent;

  a {
    color: @color-white;

    &:hover, &:focus {
      color: @color-polo;
      outline: 0;
    }
  }

  h2 {
    display: none;
  }

  .top-link,
  .menu-toggle {
    display: block;
    position: absolute;
    z-index: 2;
    top: 0;
    width: 50px;
    height: @height-header;
    padding: 0 @gutter-side-mobile;
    text-align: center;
    transition: all @transition-duration-default ease;

    strong, span {
      display: block;
    }
  }

  .top-link {
    right: 50px;
    opacity: 0;
    transform: translate(0, -30px);
    visibility: hidden;

    strong {
      margin-top: 12px;
      .font-size(13, 13px);
    }

    span {
      font-family: @font-family-sans-serif;
      font-weight: @font-weight-black;
      .font-size(9, 1);
    }
  }

  .menu-toggle {
    right: 0;
    opacity: 0.8;

    strong {
      .font-size(20, @height-header);
      margin-top: -2px;
    }

    span {
      display: none;
    }
  }

  html.show-top-link & {
    .top-link {
      opacity: 0.6;
      transform: translate(0, 0);
      visibility: visible;
    }
  }

  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: @height-header;
    background-color: fade(darken(@color-prussian, 8), 0%);
    border-bottom: 2px solid fade(@color-black, 80%);
    transition: all @transition-duration-default ease;
  }

  html.menu-open & {
    &:before {
      background-color: fade(darken(@color-prussian, 8), 100%);
    }
  }
}

#block-ombucleanup-site-logo {
  width: 180px;
  transform: scale(1);
  transform-origin: @gutter-side-mobile 5px;
  transition: all @transition-duration-default ease;

  a.brand {
    position: relative;
    z-index: 2;
    display: block;
    width: 100%;
    margin-left: -1 * @gutter-side-mobile;
    padding-top: @gutter-side-mobile;
    padding: 12px @gutter-side-mobile 6px;

    svg {
      display: block;
      width: 100%;
      height: auto;
      -webkit-filter: drop-shadow(0 3px 1px fade(@color-black, 60%));
      filter: drop-shadow(0 3px 1px fade(@color-black, 60%));

      path {
        fill: @color-white;
        transition: all @transition-duration-fast ease;
      }
    }

    &:hover, &:focus {
      svg path {
        fill: @color-polo;
      }
    }
  }
}

#block-menu-header-menu, #block-search-form {
  position: relative;
  transform: translate(0, -30px);
  height: 0;
  min-height: 0 !important;
  opacity: 0;
  overflow: hidden;
}

#block-menu-header-menu {
  margin-top: -10px;
  transition: all @transition-duration-default ease;

  .nav {
    list-style: none;
    margin: 0 -10px 0 0;
    padding: 0;

    > li {
      display: inline-block;

      &:first-child:before, &:after {
        content: "/";
        display: inline-block;
      }

      > a {
        display: inline-block;
        padding: 15px 10px;
      }

      &.expanded {
        > div, >ul {
          display: none;
        }
      }
    }
  }
}

#block-search-form {
  position: relative;
  transition: all @transition-duration-default ease;

  form {
    padding-bottom: 2.0em;
  }

  input[type="text"] {
    position: relative;
    z-index: 1;
    appearance: none;
    width: 100%;
    margin: 0;
    padding: 3px 0 3px 30px;
    border: 0;
    border-bottom: 1px solid fade(@color-polo, 50%);
    outline: 0;
    border-radius: 0;
    background-color: transparent;
    color: @color-white;
    transition: all @transition-duration-fast ease;
    .placeholder-styles(fade(@color-white, 80%));

    &:focus {
      border-bottom-color: fade(@color-polo, 100%);
      .placeholder-styles(fade(@color-polo, 20%));
    }
  }

  input[type="submit"] {
    display: none;
  }

  &:before {
    content: '';
    position: absolute;
    top: 10px;
    left: @gutter-side-mobile;
    width: 20px;
    height: 20px;
    // /sites/all/themes/bridges_theme/images/search.svg
    background: transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE4IDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBpZD0ic2VhcmNoIiBmaWxsPSIjZDNkY2VhIiBkPSJNMTcuNzAzNSwxNi41MDk4bC0xLjE4NjEsMS4yMDA3Yy0wLjM5NTQsMC4zODU5LTAuNzkwNywwLjM4NTktMS4xODYxLDBsLTQuNjEyNi00LjU4ODRjLTEuMTg2MSwwLjY4NjEtMi40MTYxLDEuMDI5Mi0zLjY0NjEsMS4wMjkyYy0xLjkzMjksMC0zLjYwMjItMC42ODYxLTUuMDA3OS0yLjA1ODRDMC42NTg5LDEwLjcyMDcsMCw5LjA0ODIsMCw3LjA3NTZjMC0xLjk3MjYsMC43MDI5LTMuNjQ1LDIuMDY0Ny01LjAxNzNDMy40NzA0LDAuNjg2MSw1LjEzOTcsMCw3LjA3MjYsMHMzLjYwMjIsMC42ODYxLDUuMDA3OSwyLjA1ODRzMi4wNjQ3LDMuMDQ0NywyLjA2NDcsNS4wMTczYzAsMS4yODY1LTAuMzUxNCwyLjQ4NzItMS4wNTQzLDMuNjQ1bDQuNjEyNiw0LjYzMTNDMTguMDk4OCwxNS42OTUxLDE4LjA5ODgsMTYuMDgxLDE3LjcwMzUsMTYuNTA5OEwxNy43MDM1LDE2LjUwOTh6IE0xMS44MTcsNy4wMzI4YzAtMS4yODY1LTAuNDgzMi0yLjQwMTQtMS40MDU3LTMuMzQ0OEM5LjQ4ODcsMi43NDQ1LDguMzkwNSwyLjMxNTcsNy4wNzI2LDIuMzE1N1M0LjY1NjUsMi43ODc0LDMuNzM0LDMuNjg3OUMyLjgxMTUsNC42MzEzLDIuMzcyMiw1LjcwMzQsMi4zNzIyLDcuMDMyOGMwLDEuMjg2NSwwLjQzOTMsMi40MDE0LDEuMzYxOCwzLjM0NDljMC45MjI1LDAuOTQzNCwyLjAyMDcsMS4zNzIyLDMuMzM4NiwxLjM3MjJzMi40MTYxLTAuNDcxNywzLjMzODYtMS4zNzIyQzExLjMzMzcsOS40NzcxLDExLjgxNyw4LjM2MjEsMTEuODE3LDcuMDMyOEwxMS44MTcsNy4wMzI4eiIgLz48L3N2Zz4=) 0 0 no-repeat;
    transition: all @transition-duration-default ease;
    opacity: 0.4;
  }

  &.focused {
    &:before {
      opacity: 1.0;
    }
  }
}

html.show-top-link {
  #block-ombucleanup-site-logo {
    transform: scale(0.63);
  }
}

html.menu-open {
  [data-type="region"][data-name="header"] {
    .menu-toggle {
      color: @color-bayoux;
    }
  }

  #block-ombucleanup-site-logo {
    transform: scale(0.85);
    opacity: 0.7;
  }

  #block-menu-header-menu, #block-search-form {
    transform: translate(0, 0);
    height: auto;
    opacity: 1;
  }

  #block-menu-header-menu {
    transition: all @transition-duration-leisurely ease 0.15s;
  }

  #block-search-form {
    transition: all @transition-duration-leisurely ease 0.35s;
  }
}

// Region: content
// ----------------------------------------------------------------------------

[data-type="region-container"][data-name="core"],
[data-type="region-container"][data-name="sections"] {
  color: @color-zodiac;
  background-color: @color-white;
}

#main, aside[data-type="block"] {
  min-height: 0;
}

#block-system-main {
  padding-top: 1.0em;
  padding-bottom: 2.0em;
}

#main > [data-type="region"] > .container:after,
[data-type="region"][data-name="section"] > .container.footer:after {
  content: '';
  display: block;
  height: 0;
  padding-top: @ar-arch;
  margin-bottom: 0px;
}

// Page title
// ----------------------------------------------------------------------------

#block-ombucleanup-page-title {
  position: relative;
  display: block;
  width: auto;
  margin-top: -@height-header;
  margin-left: ~"calc(-50vw + 50% + 0px)";
  margin-right: ~"calc(-50vw + 50% + 0px)";
  margin-bottom: 0;
  padding: @height-header + 30px @gutter-side-mobile 30px;
  background: @color-botticelli url(/sites/all/themes/bridges_theme/images/title-banners/panorama-01.jpg) top center no-repeat;
  background-size: cover;
  background-blend-mode: soft-light;
  border-bottom: 1px solid darken(@color-botticelli, 30);

  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: linear-gradient(to bottom, fade(@color-prussian, 30%) @height-header, fade(@color-prussian, 0%) 100%);
  }

  h1 {
    max-width: @max-width-site;
    margin: 0 auto;
    .font-size(42, 1.4);
    font-family: @font-family-decorative;
    font-weight: normal;
    text-shadow: 0 1px 0 @color-white;
  }
}

// Tile sections
// ----------------------------------------------------------------------------

#page > [data-type="region-container"][data-name="sections"] {
  > .field-type-tiles-section [data-type="region"][data-name="section"] {
    > .container.footer {
      padding-left: @gutter-side-mobile;
      padding-right: @gutter-side-mobile;
    }
  }
}

[data-type="region"][data-name="section"] {
  position: relative;
  padding-bottom: 2.0em;

  > .container.footer {
    .top-link {
      display: none;
    }
  }

  // TODO: Replace IDs with style names (e.g., white, blue)

  &#Hero {
    background-color: @color-white;
    padding-bottom: 0;
  }

  &#Supporting-information {
    background-color: @color-botticelli;
  }

  &#Call-to-action {
    background-color: @color-bayoux;
  }

  // TODO: Special case for white region with another white region immediately
  // following.  The bottom padding must be hidden to prevent too much visible
  // spacing between regions.

  &#Hero, &#Introduction {
    > .container.footer:after {
      display: none;
    }
  }
}

// Tile section arches
// ----------------------------------------------------------------------------

[data-type="region"][data-name="section-arch"] {
  min-height: 0 !important;
  border-bottom: @section-separation solid @color-white;

  > .container {
    position: relative;
    max-width: @max-width-site + (@gutter-side-desktop * 2);
    margin: 0 auto;
    padding-left: 0 !important;
    padding-right: 0 !important;

    &:before {
      content: '';
      display: block;
      position: absolute;
      bottom: 100%;
      left: 0;
      right: 0;
      height: 0;
      margin-bottom: -2px;
      padding-top: @ar-arch;
      // /sites/all/themes/bridges_theme/images/arches/white.svg
      background: transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNmZmZmZmYiIGQ9Ik0zMjAsMjB2LTAuMDA0QzI4My41MTEsNy44NTQsMjI1LjQyNSwwLDE2MCwwUzM2LjQ4OSw3Ljg1NCwwLDE5Ljk5NlYyMEgzMjB6Ii8+PC9zdmc+) center bottom no-repeat;
    }
  }

  .arch {
    position: absolute;
    top: @section-separation + 2;
    left: 0;
    width: 100%;
    height: 0;
    padding-top: @ar-arch;

    > svg {
      position: absolute;
      bottom: 100%;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }

  // TODO: Remove IDs and replace with section style class names

  &:first-child {
    display: none;
  }

  &#Introduction-arch, &#Why-us-arch { // white
    display: none;
  }

  &#Supporting-information-arch svg path {
    fill: @color-botticelli;
  }

  &#Call-to-action-arch svg path {
    fill: @color-bayoux;
  }
}

// Region: footer
// ----------------------------------------------------------------------------

[data-type="region"][data-name="footer"] {
  padding-bottom: 4.0em;
}

// Page: Front
// ----------------------------------------------------------------------------

body.front {
  #main {
    display: none;
  }

  #block-bean-home-gallery {
    margin-bottom: 0;
  }
}

// Tiles
// ----------------------------------------------------------------------------

[data-type="region-container"][data-name="core"],
[data-type="region-container"][data-name="sections"] {
  [data-type="block"] {
    margin-bottom: 2.0em;

    > h2 {
      &:extend(.decorative-header);
    }
  }
}

// Tile: Tile Container
// ----------------------------------------------------------------------------

.bean-container {
  > .content {
    margin-left: -1 * @gutter-side-mobile;
    margin-right: -1 * @gutter-side-mobile;
  }
}


[data-type="region-container"][data-name="core"],
[data-type="region-container"][data-name="sections"] {
  .bean-container {
    margin-bottom: 0;
  }
}

// Tile: Media
// ----------------------------------------------------------------------------

.bean-media {
  .file-video {
    padding: 7px;
    border-radius: 6px;
    background-color: @color-botticelli;
  }
}

// Tile: CTA
// ----------------------------------------------------------------------------

.bean-cta {
  > .entity-bean {
    text-align: center;
  }

  .field-name-field-cta-link {
    display: inline-block;
    margin-top: 2.0em;

    a {
      position: relative;
      display: inline-block;
      padding: 0.8em 2.0em;
      .font-size(18, 1.2);
      font-weight: @font-weight-black;
      font-style: italic;
      color: @color-white;
      text-shadow: 0 -1px 0 fade(@color-black, 50%);
      text-align: center;
      text-transform: uppercase;
      letter-spacing: -0.05em;
      outline: 0;
      background-color: @color-bondi;
    }
  }
}

// TODO: Styles for Primary / Secondary / Stinger CTA tiles?

// TODO: Primary

#block-bean-home-intro-cta {
  @well-width: 8px;
  @press-distance: 20px;
  @side-padding: 30px;

  .field-name-field-cta-link {
    position: relative;
    padding: 0;
    border: @well-width solid @color-ziggurat;
    border-radius: @well-width;
    background-color: darken(@color-lagoon, 10);
    background-image: linear-gradient(to bottom, darken(@color-lagoon, 5) 0, darken(@color-lagoon, 20) @press-distance + 3);
    transition: all @transition-duration-default ease;

    &:before, &:after {
      content: '';
      position: absolute;
      z-index: 1;
      top: 100%;
      left: -1px;
      right: -1px;
    }

    &:before {
      height: @well-width;
      background-color: @color-ziggurat;
      transition: all @transition-duration-default ease;
    }

    &:after {
      margin-top: @well-width;
      height: 15px;
      background-color: @color-white;
    }

    &:hover, &:focus {
      border-color: @color-emerald;

      &:before {
        background-color: @color-emerald;
      }
    }

    a {
      position: relative;
      display: inline-block;
      padding: 0.3em @side-padding 0;
      min-width: 270px;
      color: @color-white;

      &:before, &:after {
        content: '';
        display: block;
        padding-top: @ar-arch * 1.5;
      }

      &:before {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 100%;
        height: 0;
        margin-bottom: -1px;
        // /sites/all/themes/bridges_theme/images/arches/bondi.svg
        background: transparent url(/sites/all/themes/bridges_theme/images/arches/bondi.svg) center bottom no-repeat;
        // background: transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiMwMDIwNGYiIGQ9Ik0zMjAsMjB2LTAuMDA0QzI4My41MTEsNy44NTQsMjI1LjQyNSwwLDE2MCwwUzM2LjQ4OSw3Ljg1NCwwLDE5Ljk5NlYyMEgzMjB6Ii8+PC9zdmc+) center bottom no-repeat;

      }

      &:after {
        margin-top: 1.0em;
        margin-left: @side-padding * -1;
        margin-right: @side-padding * -1;
        // /sites/all/themes/bridges_theme/images/arches/lagoon.svg
        background: transparent url(/sites/all/themes/bridges_theme/images/arches/lagoon.svg) center bottom no-repeat;
        // background: transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIwIDIwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiMwMDIwNGYiIGQ9Ik0zMjAsMjB2LTAuMDA0QzI4My41MTEsNy44NTQsMjI1LjQyNSwwLDE2MCwwUzM2LjQ4OSw3Ljg1NCwwLDE5Ljk5NlYyMEgzMjB6Ii8+PC9zdmc+) center bottom no-repeat;
      }

      &:hover, &:focus {
        // text-shadow: 0 -1px 0 fade(@color-black, 50%), 0 3px 20px @color-emerald;
        // transform: translate(0, 3px);
      }

      &:active {
        transform: translate(0, @press-distance);
      }

    }
  }
}

// TODO: Stinger

#block-bean-home-stinger-cta {
  margin-bottom: 0;

  &, > .entity-bean {
    text-align: center;
  }

  > h2 {
    margin: 2.0em 0 2.0em 0;
    padding: 0;
    border: 0;
    color: @color-white;
    .font-size(32, 1.1);
  }

  .field-name-field-cta-link {
    position: absolute;
    z-index: 1;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 0;

    a {
      border: (@section-separation - 2) solid @color-white;
      background-color: @color-emerald;

      &:hover {
        background-color: darken(@color-emerald, 10);
      }
    }
  }
}

// Tile: Callout
// ----------------------------------------------------------------------------

.bean-callout {
  > .entity-bean {
    text-align: center;
  }

  .field-collection-view {
    padding-bottom: 1.0em;
  }

  .field-name-field-callout-image {
    padding-bottom: 0.5em;

    img {
      display: inline-block;
      max-width: 200px;
      width: 100%;
      height: auto;
    }
  }

  .field-name-field-callout-title {
    &:extend(.capital-header);
  }
}
